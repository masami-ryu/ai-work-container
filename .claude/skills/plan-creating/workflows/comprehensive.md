# Comprehensive ワークフロー（詳細プラン）

## 適用条件

- アーキテクチャ変更
- 多数のファイルに影響（10ファイル以上）
- 高い技術的複雑さ
- 大きなリスクを伴う

## 適用例

- マイクロサービス化
- 大規模リアーキテクチャ
- フレームワークの移行
- データベースの移行

## プロセス

### 1. 目的理解

- ユーザーの要求を正確に理解
- スコープと期待される成果を定義
- 制約条件を確認
- ステークホルダーの特定

### 2. 詳細調査

- `Grep`/`Glob`でコードベース全体を検索
- 現行システムの依存関係を詳細に分析
- 技術的負債の特定
- パフォーマンスボトルネックの確認
- データフローの理解

**完了条件**:
- [ ] 対象ファイルの完全な特定
- [ ] 依存関係マップの作成
- [ ] 技術的負債のリストアップ
- [ ] パフォーマンス分析完了
- [ ] データフロー図の作成

### 3. 設計検討

- `WebFetch`で最新情報とベストプラクティスを調査
- 業界標準の設計パターンを参照
- 複数の実装案を比較
- アーキテクチャの設計
- トレードオフの分析

### 4. リスク分析

- 技術的リスクの特定
- ビジネスリスクの評価
- 移行リスクの評価
- 各リスクへの対策を策定
- 回避不可能なリスクの明示

**リスク評価項目**:
- [ ] システムダウンタイムのリスク
- [ ] データ損失のリスク
- [ ] パフォーマンス劣化のリスク
- [ ] セキュリティリスク
- [ ] 互換性リスク
- [ ] スケジュールリスク

### 5. プラン作成

- 詳細なPhase別ステップを作成
- マイルストーンを設定
- 各Phaseに完了条件を明記
- ロールバック計画を含める
- テスト戦略を含める

### 6. 複数回検証

各Phase完了時に検証を実施:

#### Phase設計完了時
- [ ] Phase分割が適切か
- [ ] 依存関係が正しく反映されているか
- [ ] マイルストーンが明確か

#### 詳細ステップ作成後
- [ ] 完全性: すべての要件がプランに反映されているか
- [ ] アクション可能性: 各タスクは具体的なアクション動詞で始まるか
- [ ] 測定可能性: 完了条件は客観的に判断可能か
- [ ] 依存関係: タスク間の依存が正しく反映されているか
- [ ] リスク対応: 主要なリスクへの対策が含まれているか

#### 最終検証
- [ ] ロールバック計画が含まれているか
- [ ] テスト戦略が明確か
- [ ] モニタリング計画が含まれているか
- [ ] ドキュメント更新計画が含まれているか

### 7. 出力

- `ai/plans/YYMMDD_[概要].md`に保存
- ステータス: Ready for Implementation
- 必要に応じてレビュー依頼
