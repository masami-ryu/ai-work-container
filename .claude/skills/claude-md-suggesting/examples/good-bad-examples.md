# CLAUDE.md更新提案の良い例・悪い例

## 目次
- [セッション終了時の提案](#セッション終了時の提案)
- [新機能追加後の提案](#新機能追加後の提案)
- [技術スタック変更時の提案](#技術スタック変更時の提案)

---

## セッション終了時の提案

### 良い例

**入力**:
```
"セッションが終わったので、CLAUDE.mdの更新提案を出して"
```

**分析プロセス**:
```
1. CLAUDE.mdを読み込み
2. セッション内容を分析:
   - 新しく追加した .claude/skills/ 配下の6スキル
   - 頻繁に使用した gh pr create コマンド（5回）
   - 新しいディレクトリ ai/plans/, ai/reviews/ の作成
3. 既存内容と照らし合わせ:
   - スキル構成はCLAUDE.mdに未記載
   - gh pr createの詳細な使い方は未記載
   - ディレクトリ構造は部分的に記載あり（更新必要）
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- **スキル構成**: .claude/skills 配下の6スキルの概要を追加
  - doc-writing: ドキュメント作成の専門スキル
  - pr-reviewing: PRレビューの5段階プロセススキル
  - gh-pr-viewing: PR参照専用スキル
  - gh-issue-managing: Issue管理スキル
  - plan-creating: プラン作成の3ワークフロー対応スキル
  - claude-md-suggesting: 本スキル（CLAUDE.md更新提案）

- **PRコマンド**: gh pr create でHEREDOCを使用した長い本文の指定方法
  ```bash
  gh pr create --title "タイトル" --body "$(cat <<'EOF'
  本文の内容
  複数行可能
  EOF
  )"
  ```

### 修正すべき項目

- **ディレクトリ構造**: ai/plans/ と ai/reviews/ の用途を明確化
  - ai/plans/: プラン保存先、ファイル命名規則 YYMMDD_[概要].md
  - ai/reviews/: PRレビュー結果保存先、ファイル命名規則 YYMMDD_[PR概要]_review.md

### 削除すべき項目

- なし

### 提案理由

新しいスキルベースのワークフローが確立され、頻繁に使用されたコマンドやディレクトリ構造が明確になったため、CLAUDE.mdに記載して今後のセッションで一貫した使用方法を維持する。
```

**チェック観点**:
- [x] CLAUDE.mdを全文読み込み済み
- [x] セッション内容を具体的に分析（スキル、コマンド、ディレクトリ）
- [x] 既存内容と照らし合わせ（重複なし）
- [x] 追加項目が具体的（スキル名、コマンド例、ディレクトリ用途）
- [x] 提案理由が明確で説得力がある

---

### 悪い例

**入力**:
```
"CLAUDE.mdを更新して"
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- スキルについて
- コマンドについて
- ディレクトリについて

### 修正すべき項目

- なし

### 削除すべき項目

- なし

### 提案理由

いろいろ追加したから
```

**問題点**:
- [ ] CLAUDE.mdを読み込んでいない
- [ ] セッション内容を分析していない
- [ ] 追加項目が抽象的（「〜について」では不明確）
- [ ] 具体的なスキル名、コマンド、ディレクトリが不明
- [ ] 提案理由が曖昧（「いろいろ」は説明になっていない）
- [ ] 既存内容との重複確認がない

---

## 新機能追加後の提案

### 良い例

**入力**:
```
"新しいPRレビュー機能を追加したので、CLAUDE.mdに反映すべきか確認して"
```

**分析プロセス**:
```
1. CLAUDE.mdを読み込み
2. Grep で新機能の実装を確認:
   - .claude/skills/pr-reviewing/SKILL.md を確認
   - 5段階レビュープロセスを特定
   - ai/reviews/ ディレクトリの存在を確認
3. 既存のCLAUDE.md内容と照らし合わせ:
   - PRレビュー機能の記載なし
   - ai/reviews/ の記載なし
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- **PRレビュー機能**: pr-reviewing スキルの概要と使用方法
  - 5段階レビュープロセス（初期分析→詳細分析→ベストプラクティス参照→統合評価→品質検証）
  - エビデンスベースのフィードバック（80%以上にエビデンス付与）
  - セキュリティ問題の明確な指摘

- **レビュー結果保存先**: ai/reviews/ ディレクトリの説明
  - ファイル命名規則: YYMMDD_[PR概要]_review.md
  - 必須セクション: 概要、セキュリティ評価、コード品質評価、改善提案

### 修正すべき項目

- **ワークフローセクション**: PRレビューフローを追加
  ```
  PR受信 → pr-reviewing スキル実行 → レビュー結果を ai/reviews/ に保存 → 必要に応じてIssue作成
  ```

### 削除すべき項目

- なし

### 提案理由

新しいPRレビュー機能が追加され、5段階レビュープロセスとエビデンスベースのフィードバックが標準化されたため、使用方法とレビュー結果の保存場所をCLAUDE.mdに明記する必要がある。
```

**チェック観点**:
- [x] CLAUDE.mdを全文読み込み済み
- [x] Grepで新機能の実装を確認
- [x] 具体的な機能内容を記載（5段階プロセス、エビデンス80%など）
- [x] 保存先とファイル命名規則が明確
- [x] ワークフローの修正内容が具体的
- [x] 提案理由が標準化の観点で説得力がある

---

### 悪い例

**入力**:
```
"PRレビュー機能を追加したので、CLAUDE.mdに追加して"
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- PRレビュー機能

### 修正すべき項目

- ワークフロー

### 削除すべき項目

- なし

### 提案理由

PRレビュー機能を追加したから
```

**問題点**:
- [ ] CLAUDE.mdを読み込んでいない（重複確認なし）
- [ ] Grepで実装を確認していない（具体的な内容不明）
- [ ] 追加項目が抽象的（「PRレビュー機能」のみでは不明確）
- [ ] 保存先やファイル命名規則が不明
- [ ] ワークフローの修正内容が不明
- [ ] 提案理由が機械的（「追加したから」は理由になっていない）

---

## 技術スタック変更時の提案

### 良い例

**入力**:
```
"プロジェクトでTypeScriptを導入したので、CLAUDE.mdに反映して"
```

**分析プロセス**:
```
1. CLAUDE.mdを読み込み
2. Grepでプロジェクト構成を確認:
   - tsconfig.json の存在確認
   - package.jsonでTypeScript依存関係確認
   - src/*.ts ファイルの確認
3. 既存のCLAUDE.md内容と照らし合わせ:
   - 技術スタックセクションに「JavaScript」のみ記載
   - TypeScriptのビルドコマンドの記載なし
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- **技術スタック**: TypeScriptを追加
  - バージョン: TypeScript 5.3
  - 設定ファイル: tsconfig.json
  - 主要な設定: strict: true, target: ES2022, module: ESNext

- **ビルドコマンド**: TypeScriptのビルド手順を追加
  ```bash
  # 型チェックのみ
  npm run type-check

  # ビルド（型チェック + トランスパイル）
  npm run build
  ```

- **開発時の注意点**: TypeScript特有の注意事項
  - 型定義ファイル（*.d.ts）の管理
  - tsconfig.jsonの変更時はIDE再起動を推奨
  - 型エラーはビルド前に解消する

### 修正すべき項目

- **技術スタック**: 「JavaScript」を「TypeScript (トランスパイル先: JavaScript)」に変更

### 削除すべき項目

- なし

### 提案理由

TypeScriptの導入により、型チェックやビルドプロセスが追加されたため、CLAUDE.mdに技術スタック、ビルドコマンド、注意点を明記して、今後のセッションで適切に対応できるようにする。
```

**チェック観点**:
- [x] CLAUDE.mdを全文読み込み済み
- [x] Grepでプロジェクト構成を確認（tsconfig.json, package.json）
- [x] 具体的なバージョンと設定を記載
- [x] ビルドコマンドが明確
- [x] 注意点が実用的（型定義管理、IDE再起動など）
- [x] 既存の技術スタック記載との整合性を考慮

---

### 悪い例

**入力**:
```
"TypeScriptを導入したので、CLAUDE.mdに書いて"
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- TypeScriptについて

### 修正すべき項目

- なし

### 削除すべき項目

- なし

### 提案理由

TypeScriptを使うから
```

**問題点**:
- [ ] CLAUDE.mdを読み込んでいない
- [ ] Grepでプロジェクト構成を確認していない
- [ ] 追加項目が抽象的（「TypeScriptについて」では不明確）
- [ ] バージョンや設定が不明
- [ ] ビルドコマンドが不明
- [ ] 既存の技術スタック記載との整合性を考慮していない
- [ ] 提案理由が説明になっていない

---

## 更新不要のケース

### 良い例

**入力**:
```
"セッションが終わったので、CLAUDE.mdの更新提案を出して"
```

**分析プロセス**:
```
1. CLAUDE.mdを読み込み
2. セッション内容を分析:
   - 既存のスキルを使用しただけ（新規追加なし）
   - 通常のgitコマンドのみ使用（新規コマンドなし）
   - ディレクトリ構造に変更なし
3. 既存内容と照らし合わせ:
   - すべてCLAUDE.mdに記載済み
   - 新規情報なし
```

**出力**:
```markdown
## CLAUDE.md 更新提案

現在のセッションでは、CLAUDE.mdに追加すべき新規情報は見つかりませんでした。

### 分析結果

- 使用したスキル: すべてCLAUDE.mdに記載済み
- 使用したコマンド: すべて標準的なgitコマンド（既知）
- ディレクトリ構造: 変更なし

既存のドキュメントは適切に機能しています。
```

**チェック観点**:
- [x] CLAUDE.mdを全文読み込み済み
- [x] セッション内容を分析
- [x] 新規情報がないことを明確に記載
- [x] 分析結果を具体的に記録
- [x] ユーザーに安心感を提供（「適切に機能」）

---

### 悪い例

**入力**:
```
"CLAUDE.mdの更新提案を出して"
```

**出力**:
```markdown
## CLAUDE.md 更新提案

### 追加すべき項目

- なし

### 修正すべき項目

- なし

### 削除すべき項目

- なし

### 提案理由

特になし
```

**問題点**:
- [ ] CLAUDE.mdを読み込んでいない
- [ ] セッション内容を分析していない
- [ ] 新規情報がない理由が不明
- [ ] 分析結果が記録されていない
- [ ] ユーザーに情報を提供していない

---

## まとめ

### 良い提案の特徴

1. **具体性**: スキル名、コマンド、ディレクトリパスが明確
2. **分析**: CLAUDE.mdとセッション内容を照らし合わせ
3. **重複排除**: 既存内容を確認し、新規情報のみ提案
4. **説得力**: 提案理由が明確で納得できる
5. **ユーザー視点**: 今後のセッションでの活用を考慮

### 悪い提案の特徴

1. **抽象性**: 「〜について」など不明確な記述
2. **無分析**: CLAUDE.mdやセッション内容の確認なし
3. **重複リスク**: 既存内容との照らし合わせなし
4. **説明不足**: 提案理由が機械的で説得力がない
5. **無視点**: ユーザーの今後の活用を考慮していない
