# Issue作成・更新のベストプラクティス

## 目次
- [Issue作成のベストプラクティス](#issue作成のベストプラクティス)
- [Issue更新のベストプラクティス](#issue更新のベストプラクティス)
- [ラベル運用ガイドライン](#ラベル運用ガイドライン)

---

## Issue作成のベストプラクティス

### 作成前の検証（必須）

以下のチェックリストをコピーして、すべて満たしていることを確認してから作成してください:

```
Issue作成前チェックリスト:
- [ ] タイトルが明確で具体的（50文字以内が推奨）
- [ ] 種別が明記されている（Bug/Feature/Enhancement/Question など）
- [ ] 本文に必要な情報が含まれている（下記参照）
- [ ] 適切なラベルが選択されている
- [ ] 重複するIssueが存在しないことを確認済み
```

### タイトルのベストプラクティス

**良いタイトル**:
- ✅ 具体的で再現可能: `Bug: ログイン画面でエラーメッセージが表示されない`
- ✅ 種別が明記: `Feature: ダークモード切り替えボタンの追加`
- ✅ スコープが明確: `Enhancement: ユーザー検索のパフォーマンス改善`

**悪いタイトル**:
- ❌ 抽象的: `バグ`、`修正してください`
- ❌ 種別不明: `ログインの件`
- ❌ スコープ不明確: `いろいろ改善`

**チェック観点**:
- [ ] 種別（Bug/Feature/Enhancement/Question）が明記されている
- [ ] 対象機能・画面が明確
- [ ] 具体的な症状・要求が記載されている
- [ ] 50文字以内（長すぎると一覧で読みにくい）

### 本文のベストプラクティス

#### バグ報告の場合

**必須項目**:
```markdown
## 再現手順
1. ログイン画面にアクセス
2. メールアドレスとパスワードを入力
3. ログインボタンをクリック

## 期待動作
エラーメッセージが表示される

## 実際の動作
エラーメッセージが表示されず、画面が固まる

## 環境
- OS: Windows 11
- ブラウザ: Chrome 120
- バージョン: v1.2.3
```

**チェック観点**:
- [ ] 再現手順が具体的（誰でも再現できる）
- [ ] 期待動作が明確
- [ ] 実際の動作が記載されている
- [ ] 環境情報が含まれている

#### 機能要求の場合

**必須項目**:
```markdown
## 背景・目的
ダークモードに対応することで、夜間の利用時に目の負担を軽減したい

## 提案内容
設定画面にダークモード切り替えボタンを追加する

## 期待効果
- ユーザーの目の負担軽減
- アクセシビリティの向上

## 参考
類似機能の実装例: https://...
```

**チェック観点**:
- [ ] 背景・目的が明確
- [ ] 提案内容が具体的
- [ ] 期待効果が記載されている
- [ ] 参考資料がある場合はリンクを含む

---

## Issue更新のベストプラクティス

### 更新前の確認

```
Issue更新前チェックリスト:
- [ ] 更新内容が適切（ラベル、アサイン、ステータスなど）
- [ ] 更新理由が明確
- [ ] 関係者に通知が必要な場合は通知する
```

### ラベル追加

**良い例**:
```bash
# 優先度ラベルを追加（バグの重要度が判明したため）
gh issue edit 15 --add-label "priority:high"
```

**悪い例**:
```bash
# 理由不明のラベル追加
gh issue edit 15 --add-label "label1,label2,label3"
```

**チェック観点**:
- [ ] 追加するラベルの意味が明確
- [ ] ラベルが重複していない
- [ ] プロジェクトのラベル規約に従っている

### アサイン変更

**良い例**:
```bash
# 担当者が決まったためアサイン
gh issue edit 15 --add-assignee developer1
```

**悪い例**:
```bash
# 理由不明のアサイン変更
gh issue edit 15 --remove-assignee developer1 --add-assignee developer2
```

**チェック観点**:
- [ ] アサイン変更の理由が明確
- [ ] 担当者に事前確認済み（または承認済み）
- [ ] 複数人へのアサインが必要な場合は明確な役割分担がある

### Issueクローズ

**クローズ前の確認**:
```
Issueクローズ前チェックリスト:
- [ ] 問題が解決済み、または要求が実装済み
- [ ] 関連するPRがマージ済み（該当する場合）
- [ ] クローズ理由を明記（コメント推奨）
- [ ] ステークホルダーへの通知が完了
```

**良い例**:
```bash
# 修正完了後のクローズ（コメント付き）
gh issue comment 15 --body "PR #123 でバグ修正完了。v1.2.4でリリース予定。"
gh issue close 15
```

**悪い例**:
```bash
# 理由不明のクローズ
gh issue close 15
```

---

## ラベル運用ガイドライン

### 推奨ラベル体系

**種別ラベル**:
- `bug`: バグ報告
- `enhancement`: 既存機能の改善
- `feature`: 新機能
- `documentation`: ドキュメント関連
- `question`: 質問

**優先度ラベル**:
- `priority:critical`: 緊急対応必要
- `priority:high`: 高優先度
- `priority:medium`: 中優先度
- `priority:low`: 低優先度

**ステータスラベル**:
- `status:investigating`: 調査中
- `status:in-progress`: 作業中
- `status:blocked`: ブロック中
- `status:needs-review`: レビュー待ち

### ラベル選択の判断基準

**バグの優先度判定**:
```
優先度判定チェックリスト:
- [ ] システム停止や重大なセキュリティ問題 → priority:critical
- [ ] 主要機能に影響、多数のユーザーに影響 → priority:high
- [ ] 軽微な機能に影響、一部のユーザーに影響 → priority:medium
- [ ] UI/UXの改善、影響範囲が限定的 → priority:low
```

**機能要求の優先度判定**:
```
優先度判定チェックリスト:
- [ ] ビジネスクリティカル、法規制対応 → priority:critical
- [ ] ユーザー満足度に直結、競争力向上 → priority:high
- [ ] ユーザビリティ向上、効率化 → priority:medium
- [ ] Nice to have、将来的な改善 → priority:low
```

### 複数ラベルの組み合わせ例

**良い組み合わせ**:
```bash
# バグ報告（高優先度、調査中）
gh issue create --title "Bug: ログイン失敗" --body "..." \
  --label "bug,priority:high,status:investigating"

# 機能要求（中優先度、レビュー待ち）
gh issue create --title "Feature: ダークモード" --body "..." \
  --label "feature,priority:medium,status:needs-review"
```

**避けるべき組み合わせ**:
```bash
# ❌ 種別ラベルが複数（bugとfeatureは共存しない）
gh issue create --label "bug,feature"

# ❌ 優先度ラベルが複数（1つに絞る）
gh issue create --label "priority:high,priority:critical"
```

---

## トラブルシューティング

### よくある問題

**問題**: Issueが作成されない

**チェックリスト**:
- [ ] `gh auth status` で認証状態を確認
- [ ] リポジトリへの書き込み権限があるか確認
- [ ] タイトルと本文が空でないか確認
- [ ] ラベル名が正しいか確認（存在しないラベルは無視される）

**問題**: ラベルが追加されない

**チェックリスト**:
- [ ] ラベル名が正しいか確認（大文字小文字、スペルミス）
- [ ] リポジトリにそのラベルが存在するか確認
- [ ] `gh label list` でラベル一覧を確認

**問題**: アサインが失敗する

**チェックリスト**:
- [ ] ユーザー名が正しいか確認
- [ ] ユーザーがリポジトリにアクセス権を持っているか確認
- [ ] プライベートリポジトリの場合はコラボレーター登録を確認
